<!DOCTYPE html>
<!--[if IE 8]>
  <html class="no-js lt-ie9" lang="en">
  <![endif]-->
<!--[if gt IE 8]>
    <!-->
<html class="no-js" lang="en">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <meta name="author" content="JPush Offical"> 
    <title>REST API v2 - Push - 极光文档</title> 
    <link rel="shortcut icon" href="../../../favicon.ico">
    <script src="../../../js/jquery-2.1.4.js"></script>

    <link rel="stylesheet" href="../../../css/theme.css" type="text/css" />
    <script src="../../../js/bootstrap/js/bootstrap.js"></script>

    <link href="../../../js/bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href="../../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../css/theme_extra.css" type="text/css" />
    
    <script>
    // Current page data
    var mkdocs_page_name = "REST API v2 - Push";
    var mkdocs_page_input_path = "server/old/rest_api_v2_push.md";
    var mkdocs_page_url = "/server/old/rest_api_v2_push/";
    </script>
    
    <script src="../../../js/jpush.js"></script> 
</head>

<body data-spy="scroll" data-target="#navbar-right">
    <div class="container-fluid">
        <div class="container">
            <div class="row">
                <div class="col-lg-3  col-md-3  col-sm-3 ">
                    <div id="doc-icon">
                        <a href="/"><img src="/img/icon/logo.png"></a>
                    </div>
                </div>
                <div class="col-lg-7 col-md-8  col-sm-8">
                    <div class="header">
                        <ul class="nav nav-tabs">
                            <li role="presentation" >
                                <a href="/jpush/guideline/intro/" id="jpush-top">JPush</a></li>
                            <li role="presentation" >
                                <a href="/jmessage/guideline/jmessage_guide/" id="jmessage-top">JMessage</a></li>
                            <li role="presentation" >
                                <a href="/jsms/guideline/JSMS_guide/" id="jsms-top">短信验证码</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-2  col-md-1 col-sm-1">
                    <div>
                        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-lg-3  col-md-3 col-sm-4">
                <div id="navbar-left">
                    <ul class="wy-menu">
                        
                        <li class="subnav">
                            
                            <ul class="subnavul">
                                <li class="subnavli">
                                    <span>
                                <a href="#">
                                    入门指南 
                                <div class="nav-icon">
                                    <img src="/img/icon/right.png">
                                </div>                 
                                </a>
                                </span>
                                </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../guideline/intro/">JPush产品简介</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../console/Instructions/">控制台使用指南</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../guideline/push-SMS-intro/">JPush短信补充</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../advanced/rich_push/">Rich Push 开发指南</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../guideline/faq/">常见问题</a>
    </li>
                                
                                
                                </ul>
                                <li>
                        <li class="subnav">
                            
                            <ul class="subnavul">
                                <li class="subnavli">
                                    <span>
                                <a href="#">
                                    Android 
                                <div class="nav-icon">
                                    <img src="/img/icon/right.png">
                                </div>                 
                                </a>
                                </span>
                                </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../client/Android/android_sdk/">Android SDK 概述</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../client/Android/android_3m/">3 分钟 Demo</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../client/Android/android_guide/">Android SDK 集成指南</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../client/Android/android_debug_guide/">Android SDK 调试指南</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../client/Android/android_senior/">Android SDK 进阶教程</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../client/Android/android_api/">Android SDK API</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../client/Android/android_faq/">Android SDK FAQ</a>
    </li>
                                
                                
                                </ul>
                                <li>
                        <li class="subnav">
                            
                            <ul class="subnavul">
                                <li class="subnavli">
                                    <span>
                                <a href="#">
                                    iOS 
                                <div class="nav-icon">
                                    <img src="/img/icon/right.png">
                                </div>                 
                                </a>
                                </span>
                                </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../client/iOS/ios_sdk/">iOS SDK 概述</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../client/iOS/ios_guide_new/">iOS SDK 集成指南</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../client/iOS/ios_debug_guide/">iOS SDK 调试指南</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../client/iOS/ios_cer_guide/">iOS 证书设置指南</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../client/iOS/ios_new_fetures/">iOS 新特性汇总</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../client/iOS/ios_api/">iOS SDK API</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../client/iOS/ios_faq/">iOS SDK FAQ</a>
    </li>
                                
                                
                                </ul>
                                <li>
                        <li class="subnav">
                            
                            <ul class="subnavul">
                                <li class="subnavli">
                                    <span>
                                <a href="#">
                                    WindowsPhone 
                                <div class="nav-icon">
                                    <img src="/img/icon/right.png">
                                </div>                 
                                </a>
                                </span>
                                </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../client/Windows Phone/winphone_sdk/">Windows Phone SDK 概述</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../client/Windows Phone/winphone_3m/">Windows Phone 3分钟 Demo</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../client/Windows Phone/winphone_guide/">Windows Phone SDK 集成指南</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../client/Windows Phone/winphone_api/">Windows Phone API</a>
    </li>
                                
                                
                                </ul>
                                <li>
                        <li class="subnav">
                            
                            <ul class="subnavul">
                                <li class="subnavli">
                                    <span>
                                <a href="#">
                                    REST API 
                                <div class="nav-icon">
                                    <img src="/img/icon/right.png">
                                </div>                 
                                </a>
                                </span>
                                </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../push/server_overview/">REST API 概述</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../push/rest_api_v3_push/">Push API v3</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../push/rest_api_v3_report/">Report API v3</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../push/rest_api_v3_device/">Device API v3</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../push/rest_api_push_schedule/">Schedule API v3</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../push/http_status_code/">HTTP 状态码</a>
    </li>
                                
                                
                                </ul>
                                <li>
                        <li class="subnav">
                            
                            <ul class="subnavul">
                                <li class="subnavli">
                                    <span>
                                <a href="#">
                                    高级 
                                <div class="nav-icon">
                                    <img src="/img/icon/right.png">
                                </div>                 
                                </a>
                                </span>
                                </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../advanced/scenes/">JPush应用场景</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../advanced/topics/">JPush高级话题</a>
    </li>
                                
                                
                                </ul>
                                <li>
                        <li class="subnav">
                            
                                <ul class="subnavul">
                                    <li class="subnavli_single " >
                                        <span>
                          <a href="../../../client/client_plugins/" class="">客户端集成插件</a></span>
                                    </li>
                                </ul>
                                <li>
                        <li class="subnav">
                            
                            <ul class="subnavul">
                                <li class="subnavli">
                                    <span>
                                <a href="#">
                                    服务端SDK 
                                <div class="nav-icon">
                                    <img src="/img/icon/right.png">
                                </div>                 
                                </a>
                                </span>
                                </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../3rd/java_sdk/">Java SDK</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../3rd/python_sdk/">Python SDK</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../3rd/php_sdk/">PHP SDK</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../3rd/ruby_sdk/">Ruby SDK</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../3rd/csharp_sdk/">C# SDK</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../3rd/nodejs_sdk/">Node.js SDK</a>
    </li>
                                
                                
                                </ul>
                                <li>
                        <li class="subnav">
                            
                            <ul class="subnavul">
                                <li class="subnavli">
                                    <span>
                                <a href="#">
                                    旧文档 
                                <div class="nav-icon">
                                    <img src="/img/icon/right.png">
                                </div>                 
                                </a>
                                </span>
                                </li>
                                
                                    <li class="toctree-l1 current">
        <a class="current" href="./">REST API v2 - Push</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../rest_api_v2_report/">REST API v2 - Report</a>
    </li>
                                
                                
                                </ul>
                                <li>
                        <li class="subnav">
                            
                                <ul class="subnavul">
                                    <li class="subnavli_single " >
                                        <span>
                          <a href="../../../updates/" class="">最近更新</a></span>
                                    </li>
                                </ul>
                                <li>
                        <li class="subnav">
                            
                                <ul class="subnavul">
                                    <li class="subnavli_single " >
                                        <span>
                          <a href="../../../resources/" class="">资源下载</a></span>
                                    </li>
                                </ul>
                                <li></ul>
                    </ul>
                </div>
            </div>
            <div class="col-lg-8  col-md-9  col-sm-8">
                <div id="content-top"></div>
                <section >
                    <div class="rst-content"><div id="breadcrumbs" role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../guideline/intro/">极光文档</a>></li>
    
      
        
          <li><a href="./">旧文档</a> ></li>
        
      
    
    <li>
    REST API v2 - Push
    <!--
    <a href="./">REST API v2 - Push</a>
    -->
    </li>
  </ul>
</div>
                        <div role="main">
                            <div class="section"> <h1>REST API v2</h1>

<div style="font-size:13px;background: #F0E68C;border: 1px solid #ACBFD7;border-radius: 3px;padding: 8px 16px; padding-bottom: 0;margin-bottom: 0;">
<p>特别提示：建议不要在客户端里写代码直接调用此 API。因为 Android apk 比较容易破解，别人很容易从客户端代码里找出来调用 JPush Remote API 所需要的保密信息，从而可以模拟到你的身份来发起恶意的推送。
<br>
<p>建议的使用方式是：调用 JPush Remote API 的代码放在你自己的应用服务器上。你自己的应用服务器对自己的客户端提供接口来推送消息。具体请参考推聊的作法：示例与代码。
<br>
<p>升级到 v3 Push API：建议开发者升级到 v3 版本。此版本会继续支持到 2015 年。
</div>

<h3 id="_1">推送全功能接口</h3>
<h4 id="_2">功能说明</h4>
<p>开发者调用此远程接口，向指定的用户推送通知消息，或者自定义消息。</p>
<p>此 API 可用于开发者想要在自己的业务服务器上，灵活地向指定的某个或者某些用户推送消息的场景。</p>
<h4 id="_3">调用地址</h4>
<p>http://api.jpush.cn:8800/v2/push</p>
<div style="font-size:13px;background: #E0EFFE;border: 1px solid #ACBFD7;border-radius: 3px;padding: 8px 16px; padding-bottom: 0;margin-bottom: 0;">
<p>  请使用域名访问 JPush API，不要直接使用 IP。
<p>  本接口只支持 HTTP Post 请求。
<p>  若无特殊说明，接口中统一使用 utf-8 编码。
<p>  HTTP Post 的Content-Type 需采用 application/x-www-form-urlencoded
<p>  考虑内容里可能有一些特殊字符，有必要在调用接口前对内容进行 URL Encode。更详细说明请参考：特殊字符问题。
<p>  如果你很重视接口安全，请使用 SSL 接口，默认走443ssl加密协议端口，即接口URL改为: [> https://+ api.jpush.cn/v2/push][0]> 。
<p>  无论你在极光推送Portal上的应用是生产环境还是测试环境，都使用这个 API 地址推送消息。
</div>

<h4 id="_4">调用参数</h4>
<h5 id="sendno">sendno</h5>
<p>int 必须 </p>
<p>发送编号（最大支持32位正整数(即 4294967295 )）。由开发者自己维护，用于开发者自己标识一次发送请求。</p>
<h5 id="app_key">app_key</h5>
<p>int 必须</p>
<p>待发送的应用程序(appKey)，只能填一个。</p>
<h5 id="receiver_type">receiver_type</h5>
<p>int 必须</p>
<p>接收者类型。</p>
<p>2 - 指定的 tag。 <br />
3 - 指定的 alias。 <br />
4 - 广播：对 app_key 下的所有用户推送消息。 <br />
5 - 根据 RegistrationID 进行推送。Android SDK r1.6.0 及以上版本支持。 </p>
<h5 id="receiver_value">receiver_value</h5>
<p>string 可选</p>
<p>发送范围值，与 receiver_type 相对应。</p>
<p>2 - App 调用 SDK API 设置的 tag （标签）。支持多达 10 个，使用 "," 间隔。填写多个 tag 时，最后推送对象是这多个 tag 的 user set 的并集，而不会有重复用户。 <br />
3 - App 调用 SDK API 设置的 alias （别名）。支持多达 1000 个，使用 "," 间隔。 <br />
4 - 不需要填。 <br />
5 - 目标设备的 RegistrationID。支持多达 1000 个，使用 “,” （逗号）间隔。 </p>
<h5 id="verification_code">verification_code</h5>
<p>string 必须</p>
<p>验证串，用于校验发送的合法性。</p>
<p>由 sendno, receiver_type, receiver_value, master_secret 4个值拼接起来（直接拼接字符串）后，进行一次MD5 (32位大写) 生成。</p>
<p>参考：verification code 拼接示例</p>
<p>由于验证串的组成部分有 String 内容，而 JPush采用 UTF-8 编码。所以，如果你的 API 调用没有使用 UTF-8 编码时，首先会遇到 verification_code 不正确验证失败的错误返回，导致调用不成功。</p>
<h5 id="msg_type">msg_type</h5>
<p>int 必须</p>
<p>发送消息的类型：</p>
<p>1 - 通知</p>
<p>2 - 自定义消息（只有 Android 支持） </p>
<h5 id="msg_content">msg_content</h5>
<p>int 必须</p>
<p>描述此次发送调用。</p>
<p>不会发到用户。</p>
<h5 id="platform">platform</h5>
<p>string 必须</p>
<p>目标用户终端手机的平台类型，如： android, ios, winphone 多个请使用逗号分隔。</p>
<h5 id="apns_production">apns_production</h5>
<p>int 可选 </p>
<p>指定 APNS 通知发送环境：0: 开发环境，1：生产环境。</p>
<p>如果不携带此参数则推送环境与 JPush Web 上的应用 APNS 环境设置相同。</p>
<h5 id="time_to_live">time_to_live</h5>
<p>int 可选</p>
<p>从消息推送时起，保存离线的时长。秒为单位。最多支持10天（864000秒）。</p>
<p>0 表示该消息不保存离线。即：用户在线马上发出，当前不在线用户将不会收到此消息。</p>
<p>此参数不设置则表示默认，默认为保存1天的离线消息（86400秒）。</p>
<h5 id="override_msg_id">override_msg_id</h5>
<p>string 可选</p>
<p>待覆盖的上一条消息的 ID。</p>
<p>指明了此参数，则当前消息会覆盖指定 ID 的消息。覆盖的具体行为是：</p>
<p>1）如果被覆盖的消息用户暂时未收到，则以后也不会收到；</p>
<p>2）如果被覆盖的消息 Android 用户已经收到，但未清除通知栏，则 Android 通知栏上展示时新的一条将覆盖前一条。</p>
<p>覆盖功能起作用的时限是：1 天。 如果在覆盖指定时限内该 msg_id 不存在，则返回 1003 错误，提示不是一次有效的消息覆盖操作，当前的消息不会被推送。</p>
<h4 id="_5">调用返回</h4>
<p>当调用接口时，极光Push Server会进行简单的校验检查，并立即返回结果。</p>
<p>正常情况下返回码为 200，返回内容类型为字符串，形式为 JSON。</p>
<table>
<thead>
<tr>
<th>Key名称</th>
<th>Value内容说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>errcode</td>
<td>错误码。参考：错误码定义</td>
</tr>
<tr>
<td>errmsg</td>
<td>错误说明</td>
</tr>
<tr>
<td>msg_id</td>
<td>该消息的 ID</td>
</tr>
</tbody>
</table>
<h3 id="_6">消息内容格式</h3>
<p>消息发送接口调用参数里 msg_content 格式有特定要求，此节做具体说明。</p>
<p>首先，其要求为 JSON 格式。具体内容根据类型有不同。</p>
<h4 id="_7">通知类型</h4>
<p>当调用参数 msg_type = 1 时，msg_content JSON 要求：</p>
<table>
<thead>
<tr>
<th>Key名称</th>
<th>是否必须</th>
<th>Value内容说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>n_builder_id</td>
<td>可选</td>
<td>1-1000的数值，不填则默认为 0，使用 极光Push SDK 的默认通知样式。只有 Android 支持这个参数。进一步了解请参考文档 <a href="../../../client/android_api">通知栏样式定制 API</a></td>
</tr>
<tr>
<td>n_title</td>
<td>可选</td>
<td>通知标题。不填则默认使用该应用的名称。只有 Android支持这个参数。</td>
</tr>
<tr>
<td>n_content</td>
<td>必须</td>
<td>通知内容。</td>
</tr>
<tr>
<td>n_extras</td>
<td>可选</td>
<td>通知附加参数。JSON格式。客户端可取得全部内容。</td>
</tr>
</tbody>
</table>
<pre><code> 关于长度限制，请参考：通知长度限制说明。

 另外，对于 iOS 通知，有些特别的地方需要说明，请参考：iOS APNs 特别说明。
</code></pre>

<h4 id="ios-apns">iOS APNs 特别说明</h4>
<p>通过 JPush API 同时推送 iOS APNs 消息时，有一些内容需要与 APNs 适配。</p>
<p>关于 APNs 的具体详细定义，请参考官方文档：<a href="http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW12">Apple Push Notification Service</a>。</p>
<table>
<thead>
<tr>
<th>JPush 字段</th>
<th>APNs 字段</th>
</tr>
</thead>
<tbody>
<tr>
<td>n_content</td>
<td>alert</td>
</tr>
<tr>
<td>n_extras -&gt; ios -&gt; badge</td>
<td>badge</td>
</tr>
<tr>
<td>n_extras -&gt; ios -&gt; sound</td>
<td>sound</td>
</tr>
<tr>
<td>n_extras -&gt; ios &gt;content-available</td>
<td>content-available</td>
</tr>
</tbody>
</table>
<p>n_content 字段必须存在，但可以为空字符串。这时，如果 extras 里带了 badge 字段，则收到的通知会显示应用图标右上角数字，而没有通知栏内容。</p>
<p>n_extras 整体可以不填。</p>
<p>指定了 iOS 特定参数的完整的通知 msg_content JSON串示例：</p>
<pre><code>{
 "n_content":"通知内容", 
 "n_extras":{
    "ios":{
        "badge":88, 
        "sound":"default", 
        "content-available":1
        }, 
 "user_param_1":"value1", 
 "user_param_2":"value2"}
}
</code></pre>
<h4 id="_8">通知长度限制说明</h4>
<p>JPush API 同时支持 Andorid 与 iOS 平台的通知推送。</p>
<p>由于 APNs 限制是 255 个字节，所以 JPush 推送通知也依据 APNs 来统一限制。</p>
<div style="font-size:13px;background: #E0EFFE;border: 1px solid #ACBFD7;border-radius: 3px;padding: 8px 16px; padding-bottom: 0;margin-bottom: 0;">
 <p>通知长度限制的设计，一方面的确是因为 APNs 的原因。
 <br>
 <p>另一方面，我们也认为，对于“通知”，在通知栏展示的信息，
 这么长的长度足够了。
<br>
<br>另外请留意：这里说的长度，是指字节。由于使用 UTF-8 编码，所以一个中文字符占 3 个字节。
</div>

<p>由于组装 APNs 有几个 JSON 字段，所以 JPush API 通知限制具体大小为：220 个字节。</p>
<p>具体限制算法为：n_content 里边的内容，加上 n_extras 里边的内容，其总长度。</p>
<h4 id="_9">自定义消息类型</h4>
<pre><code>只有 Android 支持自定义消息
</code></pre>

<p>当调用参数 msg_type = 2 时，msg_content JSON 要求：</p>
<div class="table-d" align="center" >
  <table border="1" width = "100%">
    <tr  bgcolor="#D3D3D3" >
      <th >Key名称</th>
      <th >选项</th>
      <th >Value内容说明</th>
    </tr>
    <tr >
      <td>message</td>
      <td>必须</td>
      <td>自定义消息的内容。 </td>
    </tr>
    <tr >
      <td>content_type</td>
      <td>可选 </td>
      <td>message 字段里的内容类型。用于特定的 message 内容解析  </td>
    </tr>
    <tr >
      <td>title</td>
      <td>可选</td>
      <td>消息标题 </td>
    </tr>
    <tr >
      <td>extras</td>
      <td>可选</td>
      <td>原样返回，JSON 格式的更多的附属信息</td>
    </tr>
</table>
</div>

<p>注：自定义消息所有字段信息的总长度，不得超过 1000 个字节。</p>
<pre><code>值得注意的是，这些信息极光 Push SDK 本身都不去解析，
而是客户端提供 API 给到开发者自己的应用程序去处理。请参考相关文档 接收推送消息。
</code></pre>

<h4 id="verification_code_1">verification_code 拼接示例</h4>
<pre><code>int sendno = 3321;
int receiverType = 2;
String receiverValue = "game, oldman, student";
String masterSecret = "71638202938228382811FCB1CB308ADC"; //极光推送portal 
上分配的 appKey 的验证串(masterSecret)
 
String input = String.valueOf(sendno) + receiverType + receiverValue + masterSecret;
String verificationCode = StringUtils.toMD5(input);
</code></pre>
<h3 id="_10">特殊字符问题</h3>
<p>如果你在调用 API 时直接使用官方的 Java Library - Java v2，在内容里可以发送任何特殊字符。</p>
<p>但是，如果你要自己直接调用本 API，则会有特殊字符问题需要考虑。</p>
<p>原理上，有二部分有特殊字符问题：</p>
<ul>
<li>推送内容 msg_content 里边是 JSON 字符串，所以 JSON 相关的特殊字符，需要有转义的问题。</li>
<li>HTTP API 的方式调用接口，本质上还是基于 URL 来传输，所有有 URL encode 的问题。</li>
</ul>
<p>所以，在正式调用接口发出内容前，你的代码需要对内容做两个部分的处理： JSON encode, URL encode。</p>
<p>对于 JSON encode，如果你直接使用一些 JSON library来处理 JSON，那么，这些包会自动帮你处理特殊字符转义。</p>
<p>如果你完全手动拼装 JSON字符串，则有必要你自己来写 JSON 特殊字符串转义。请参考 JSON 官方文档：<a href="http://www.json.org/">http://www.json.org/</a></p>
<p>URL encode 一般来说，各开发语言平台都提供了这方面的工具方法，来做 URL encode 操作。</p>
<h2 id="_11">错误码定义</h2>
<p>HTTP 返回码为 200 时，是业务相关的错误。</p>
<div class="table-d" align="center" >
  <table border="1" width = "100%">
    <tr  bgcolor="#D3D3D3" >
      <th >错误码</th>
      <th >错误描述</th>
    </tr>
    <tr >
      <td>0</td>
      <td>调用成功</td>
    </tr>
    <tr >
      <td>10</td>
      <td>系统内部错误 </td>
    </tr>
    <tr >
      <td>1001</td>
      <td>只支持 HTTP Post 方法，不支持 Get 方法  </td>
    </tr>
    <tr >
      <td>1002</td>
      <td>缺少了必须的参数  </td>
    </tr>
    <tr >
      <td>1003</td>
      <td>参数值不合法  </td>
    </tr>
    <tr >
      <td>1004</td>
      <td>verification_code 验证失败  </td>
    </tr>
    <tr >
      <td>1005</td>
      <td>消息体太大 </td>
    </tr>
    <tr >
      <td>1007</td>
      <td>receiver_value 参数 非法  </td>
    </tr>
    <tr >
      <td>1008</td>
      <td>appkey参数非法  </td>
    </tr>
    <tr >
      <td>1010</td>
      <td>msg_content 不合法   </td>
    </tr>
    <tr >
      <td>1011</td>
      <td>没有满足条件的推送目标 </td>
    </tr>
    <tr >
      <td>1012</td>
      <td>iOS 不支持推送自定义消息。只有 Android 支持推送自定义消息。  </td>
    </tr>
    <tr >
      <td>1013</td>
      <td>content-type 只支持 application/x-www-form-urlencoded </td>
    </tr>
    <tr >
      <td>1014</td>
      <td>消息内容包含敏感词汇。</td>
    </tr>
    <tr >
      <td>1030</td>
      <td>内部服务超时。稍后重试。</td>
    </tr>
  </table>
</div>

<pre><code>返回1011时：

如果群发：则此应用还没有一个客户端用户注册。请检查 SDK 集成是否正常。

如果是推送给某别名或者标签：则此别名或者标签还没有在任何客户端SDK提交设置成功。 

</code></pre>

<h3 id="_12">参考</h3>
<p>查询消息送达情况请参考： <a href="../../server/rest_api_v3_report">Report-API</a></p>
<p>了解API 频率限制：<a href="../../server/server_overview/#api-rating">API 频率限制</a></p> </div>
                        </div> <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../rest_api_v2_report/" class="btn btn-neutral float-right" title="REST API v2 - Report">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../../3rd/nodejs_sdk/" class="btn btn-neutral float-left" title="Node.js SDK"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright 2011-2016, jiguang.cn, All Rights Reserved. <br />粤ICP备12056275号-13 深圳市和讯华谷信息技术有限公司</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer> </div>
                </section>
            </div>
            <div class="col-lg-1">
                <div class="visible-lg">
                    <div id="tocright">
                        <div id="navbar-right">
                            <div>
                            <p>目录</p>
                            </div>
                            <ul class="nav" >
    
        
            <li><a href="#_2">功能说明</a></li>
        
            <li><a href="#_3">调用地址</a></li>
        
            <li><a href="#_4">调用参数</a></li>
        
            <li><a href="#_5">调用返回</a></li>
        
    
        
            <li><a href="#_7">通知类型</a></li>
        
            <li><a href="#ios-apns">iOS APNs 特别说明</a></li>
        
            <li><a href="#_8">通知长度限制说明</a></li>
        
            <li><a href="#_9">自定义消息类型</a></li>
        
            <li><a href="#verification_code_1">verification_code 拼接示例</a></li>
        
    
        
    
        
            <li><a href="#_12">参考</a></li>
        
    
    </ul>
    


                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
</body>

</html>