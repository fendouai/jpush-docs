<!DOCTYPE html>
<!--[if IE 8]>
  <html class="no-js lt-ie9" lang="en">
  <![endif]-->
<!--[if gt IE 8]>
    <!-->
<html class="no-js" lang="en">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <meta name="author" content="JPush Offical"> 
    <title>Android SDK 集成指南 - 极光文档</title> 
    <link rel="shortcut icon" href="../../../favicon.ico">
    <script src="../../../js/jquery-2.1.4.js"></script>

    <link rel="stylesheet" href="../../../css/theme.css" type="text/css" />
    <script src="../../../js/bootstrap/js/bootstrap.js"></script>

    <link href="../../../js/bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href="../../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../css/theme_extra.css" type="text/css" />
    
    <script>
    // Current page data
    var mkdocs_page_name = "Android SDK 集成指南";
    var mkdocs_page_input_path = "client/Android/android_guide.md";
    var mkdocs_page_url = "/client/Android/android_guide/";
    </script>
    
    <script src="../../../js/jpush.js"></script> 
</head>

<body data-spy="scroll" data-target="#navbar-right">
    <div class="container-fluid">
        <div class="container">
            <div class="row">
                <div class="col-lg-3  col-md-3  col-sm-3 ">
                    <div id="doc-icon">
                        <a href="/"><img src="/img/icon/logo.png"></a>
                    </div>
                </div>
                <div class="col-lg-7 col-md-8  col-sm-8">
                    <div class="header">
                        <ul class="nav nav-tabs">
                            <li role="presentation" >
                                <a href="/jpush/guideline/intro/" id="jpush-top">JPush</a></li>
                            <li role="presentation" >
                                <a href="/jmessage/guideline/jmessage_guide/" id="jmessage-top">JMessage</a></li>
                            <li role="presentation" >
                                <a href="/jsms/guideline/JSMS_guide/" id="jsms-top">短信验证码</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-2  col-md-1 col-sm-1">
                    <div>
                        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-lg-3  col-md-3 col-sm-4">
                <div id="navbar-left">
                    <ul class="wy-menu">
                        
                        <li class="subnav">
                            
                            <ul class="subnavul">
                                <li class="subnavli">
                                    <span>
                                <a href="#">
                                    入门指南 
                                <div class="nav-icon">
                                    <img src="/img/icon/right.png">
                                </div>                 
                                </a>
                                </span>
                                </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../guideline/intro/">JPush产品简介</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../console/Instructions/">控制台使用指南</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../guideline/push-SMS-intro/">JPush短信补充</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../advanced/rich_push/">Rich Push 开发指南</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../guideline/faq/">常见问题</a>
    </li>
                                
                                
                                </ul>
                                <li>
                        <li class="subnav">
                            
                            <ul class="subnavul">
                                <li class="subnavli">
                                    <span>
                                <a href="#">
                                    Android 
                                <div class="nav-icon">
                                    <img src="/img/icon/right.png">
                                </div>                 
                                </a>
                                </span>
                                </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../android_sdk/">Android SDK 概述</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../android_3m/">3 分钟 Demo</a>
    </li>
                                
                                    <li class="toctree-l1 current">
        <a class="current" href="./">Android SDK 集成指南</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../android_debug_guide/">Android SDK 调试指南</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../android_senior/">Android SDK 进阶教程</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../android_api/">Android SDK API</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../android_faq/">Android SDK FAQ</a>
    </li>
                                
                                
                                </ul>
                                <li>
                        <li class="subnav">
                            
                            <ul class="subnavul">
                                <li class="subnavli">
                                    <span>
                                <a href="#">
                                    iOS 
                                <div class="nav-icon">
                                    <img src="/img/icon/right.png">
                                </div>                 
                                </a>
                                </span>
                                </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../iOS/ios_sdk/">iOS SDK 概述</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../iOS/ios_guide_new/">iOS SDK 集成指南</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../iOS/ios_debug_guide/">iOS SDK 调试指南</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../iOS/ios_cer_guide/">iOS 证书设置指南</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../iOS/ios_new_fetures/">iOS 新特性汇总</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../iOS/ios_api/">iOS SDK API</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../iOS/ios_faq/">iOS SDK FAQ</a>
    </li>
                                
                                
                                </ul>
                                <li>
                        <li class="subnav">
                            
                            <ul class="subnavul">
                                <li class="subnavli">
                                    <span>
                                <a href="#">
                                    WindowsPhone 
                                <div class="nav-icon">
                                    <img src="/img/icon/right.png">
                                </div>                 
                                </a>
                                </span>
                                </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../Windows Phone/winphone_sdk/">Windows Phone SDK 概述</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../Windows Phone/winphone_3m/">Windows Phone 3分钟 Demo</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../Windows Phone/winphone_guide/">Windows Phone SDK 集成指南</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../Windows Phone/winphone_api/">Windows Phone API</a>
    </li>
                                
                                
                                </ul>
                                <li>
                        <li class="subnav">
                            
                            <ul class="subnavul">
                                <li class="subnavli">
                                    <span>
                                <a href="#">
                                    REST API 
                                <div class="nav-icon">
                                    <img src="/img/icon/right.png">
                                </div>                 
                                </a>
                                </span>
                                </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../server/push/server_overview/">REST API 概述</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../server/push/rest_api_v3_push/">Push API v3</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../server/push/rest_api_v3_report/">Report API v3</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../server/push/rest_api_v3_device/">Device API v3</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../server/push/rest_api_push_schedule/">Schedule API v3</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../server/push/http_status_code/">HTTP 状态码</a>
    </li>
                                
                                
                                </ul>
                                <li>
                        <li class="subnav">
                            
                            <ul class="subnavul">
                                <li class="subnavli">
                                    <span>
                                <a href="#">
                                    高级 
                                <div class="nav-icon">
                                    <img src="/img/icon/right.png">
                                </div>                 
                                </a>
                                </span>
                                </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../advanced/scenes/">JPush应用场景</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../advanced/topics/">JPush高级话题</a>
    </li>
                                
                                
                                </ul>
                                <li>
                        <li class="subnav">
                            
                                <ul class="subnavul">
                                    <li class="subnavli_single " >
                                        <span>
                          <a href="../../client_plugins/" class="">客户端集成插件</a></span>
                                    </li>
                                </ul>
                                <li>
                        <li class="subnav">
                            
                            <ul class="subnavul">
                                <li class="subnavli">
                                    <span>
                                <a href="#">
                                    服务端SDK 
                                <div class="nav-icon">
                                    <img src="/img/icon/right.png">
                                </div>                 
                                </a>
                                </span>
                                </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../server/3rd/java_sdk/">Java SDK</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../server/3rd/python_sdk/">Python SDK</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../server/3rd/php_sdk/">PHP SDK</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../server/3rd/ruby_sdk/">Ruby SDK</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../server/3rd/csharp_sdk/">C# SDK</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../server/3rd/nodejs_sdk/">Node.js SDK</a>
    </li>
                                
                                
                                </ul>
                                <li>
                        <li class="subnav">
                            
                            <ul class="subnavul">
                                <li class="subnavli">
                                    <span>
                                <a href="#">
                                    旧文档 
                                <div class="nav-icon">
                                    <img src="/img/icon/right.png">
                                </div>                 
                                </a>
                                </span>
                                </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../server/old/rest_api_v2_push/">REST API v2 - Push</a>
    </li>
                                
                                    <li class="toctree-l1 ">
        <a class="" href="../../../server/old/rest_api_v2_report/">REST API v2 - Report</a>
    </li>
                                
                                
                                </ul>
                                <li>
                        <li class="subnav">
                            
                                <ul class="subnavul">
                                    <li class="subnavli_single " >
                                        <span>
                          <a href="../../../updates/" class="">最近更新</a></span>
                                    </li>
                                </ul>
                                <li>
                        <li class="subnav">
                            
                                <ul class="subnavul">
                                    <li class="subnavli_single " >
                                        <span>
                          <a href="../../../resources/" class="">资源下载</a></span>
                                    </li>
                                </ul>
                                <li></ul>
                    </ul>
                </div>
            </div>
            <div class="col-lg-8  col-md-9  col-sm-8">
                <div id="content-top"></div>
                <section >
                    <div class="rst-content"><div id="breadcrumbs" role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../guideline/intro/">极光文档</a>></li>
    
      
        
          <li><a href="../android_sdk/">Android</a> ></li>
        
      
    
    <li>
    Android SDK 集成指南
    <!--
    <a href="./">Android SDK 集成指南</a>
    -->
    </li>
  </ul>
</div>
                        <div role="main">
                            <div class="section"> <h1 id="android-sdk">Android SDK 集成指南</h1>
<h2 id="_1">使用提示</h2>
<p>本文是 JPush Android SDK 标准的集成指南文档。用以指导 SDK 的使用方法，默认读者已经熟悉IDE（Eclipse 或者 Android Studio）的基本使用方法，以及具有一定的 Android 编程知识基础。</p>
<p>匹配的 SDK 版本为：v2.1.8及以后版本。</p>
<ul>
<li><a href="../android_3m/">3 分钟快速 Demo（Android）</a>：如果您想要快速地测试、感受下极光推送的效果，请参考本文在几分钟内跑通Demo。</li>
<li>极光推送<a href="http://docs.jiguang.cn/">文档网站</a>上，有极光推送相关的所有指南、API、教程等全部的文档。包括本文档的更新版本，都会及时地发布到该网站上。</li>
<li><a href="http://community.jiguang.cn/">极光社区</a>网站：大家除了文档之外，还有问题与疑问，会到这里来提问题，以及时地得到解答。</li>
<li>如果您看到本文档，但还未下载Android SDK，请访问<a href="../../../resources/">SDK下载页面</a>下载。</li>
</ul>
<h2 id="_2">产品功能说明</h2>
<p>极光推送（JPush）是一个端到端的推送服务，使得服务器端消息能够及时地推送到终端用户手机上，让开发者积极地保持与用户的连接，从而提高用户活跃度、提高应用的留存率。极光推送客户端支持 Android, iOS 两个平台。</p>
<p>本 Android SDK 方便开发者基于 JPush 来快捷地为 Android App 增加推送功能。</p>
<h3 id="_3">主要功能</h3>
<ul>
<li>保持与服务器的长连接，以便消息能够即时推送到达客户端</li>
<li>接收通知与自定义消息，并向开发者App 传递相关信息</li>
</ul>
<h3 id="_4">主要特点</h3>
<ul>
<li>客户端维持连接占用资源少、耗电低</li>
<li>SDK丰富的接口，可定制通知栏提示样式</li>
<li>服务器大容量、稳定</li>
</ul>
<h3 id="jpush-android-release-2xyzip">jpush-android-release-2.x.y.zip 集成压缩包内容</h3>
<ul>
<li>AndroidManifest_androidstudio_example.xml / AndroidManifest_eclipse_example.xml<ul>
<li>客户端嵌入SDK参考的配置文件</li>
</ul>
</li>
<li>libs/jpush-android-2.x.y.jar <ul>
<li>SDK Java 开发包</li>
</ul>
</li>
<li>libs/(cpu-type)/libjpush2xy.so <ul>
<li>各种CPU类型的native开发包</li>
</ul>
</li>
<li>res<ul>
<li>集成SDK必须添加的资源文件</li>
</ul>
</li>
<li>example<ul>
<li>是一个完整的 Android 项目，通过这个演示了 JPush SDK 的基本用法，可以用来做参考。</li>
</ul>
</li>
</ul>
<h3 id="android-sdk_1">Android SDK 版本</h3>
<p>目前SDK只支持Android 2.3或以上版本的手机系统。富媒体信息流功能则需Android3.0或以上版本的系统。</p>
<h2 id="jcenter">jcenter 自动集成步骤</h2>
<p><strong><em>说明</em></strong> ： 使用jcenter自动集成的开发者，不需要在项目中添加jar和so，jcenter会自动完成依赖；在AndroidManifest.xml中不需要添加任何JPush SDK 相关的配置，jcenter会自动导入, 如果手动添加则是以开发者添加的为准覆盖掉默认配置。</p>
<ul>
<li>
<p>确认android studio的 Project 根目录的主 gradle 中配置了jcenter支持。（新建project默认配置就支持）</p>
<pre><code>buildscript {
    repositories {
        jcenter()
    }
    ......
}

allprojets {
    repositories {
        jcenter()
    }
}
</code></pre>
</li>
<li>
<p>在 module 的 gradle 中添加依赖和AndroidManifest的替换变量。</p>
<pre><code>android {
    ......
    defaultConfig {
        applicationId "com.xxx.xxx" //JPush上注册的包名.
        ......

        ndk {
            //选择要添加的对应cpu类型的.so库。 
            abiFilters 'armeabi', 'armeabi-v7a', 'armeabi-v8a' 
            // 还可以添加 'x86', 'x86_64', 'mips', 'mips64'
        }

        manifestPlaceholders = [
            JPUSH_PKGNAME : applicationId,
            JPUSH_APPKEY : "你的appkey", //JPush上注册的包名对应的appkey.
            JPUSH_CHANNEL : "developer-default", //暂时填写默认值即可.
        ]
        ......
    }
    ......
}

dependencis {
    ......

    compile 'cn.jiguang:jpush:2.1.8'  // 此处以SDK 2.1.8版本为例

    ......
}
</code></pre>
</li>
</ul>
<p><strong><em>注</em></strong> : 如果在添加以上 abiFilter 配置之后android Studio出现以下提示：</p>
<pre><code>    NDK integration is deprecated in the current plugin. Consider trying the new experimental plugin.
</code></pre>
<p>则在 Project 根目录的gradle.properties文件中添加：</p>
<pre><code>    android.useDeprecatedNdk=true。
</code></pre>
<h2 id="_5">手动集成步骤</h2>
<ul>
<li>解压缩 jpush-android-release-2.x.y.zip 集成压缩包。</li>
<li>复制 libs/jpush-sdk-2.x.y.jar 到工程 libs/ 目录下。</li>
<li>复制 libs/(cpu-type)/libjpush2xy.so 到你的工程中存放对应cpu类型的目录下。</li>
<li>复制 res/ 中drawable-hdpi, layout, values文件夹中的资源文件到你的工程中 res/ 对应的目录下。</li>
</ul>
<p><strong><em>说明 1</em></strong>：若没有res/drawable-xxxx/jpush_notification_icon这个资源默认使用应用图标作为通知icon，在5.0以上系统将应用图标作为statusbar icon可能显示不正常，用户可定义没有阴影和渐变色的icon替换这个文件，文件名不要变。</p>
<p><strong><em>说明 2</em></strong>：使用android studio的开发者，如果使用jniLibs文件夹导入so文件，则仅需将所有cpu类型的文件夹拷进去；如果将so文件添加在module的libs文件夹下，注意在module的gradle配置中添加一下配置：</p>
<pre><code>    android {
        ......
        sourceSets {
            main {
                jniLibs.srcDirs = ['libs']
                ......
            }
            ......
        }
        ......
    }
</code></pre>
<h3 id="androidmanifestxml">配置 AndroidManifest.xml</h3>
<p>根据 SDK 压缩包里的 AndroidManifest.xml 样例文件，来配置应用程序项目的 AndroidManifest.xml 。</p>
<p>主要步骤为：</p>
<ul>
<li>复制备注为 "Required" 的部分</li>
<li>将备注为替换包名的部分，替换为当前应用程序的包名</li>
<li>将AppKey替换为在Portal上注册该应用的的Key,例如（9fed5bcb7b9b87413678c407）</li>
</ul>
<p><strong>温馨提示</strong></p>
<p>如果使用android studio, 可在AndroidManifest中引用applicationId的值，在build.gradle配置中 defaultConfig节点下配置，如：</p>
<pre><code>defaultConfig {
      applicationId &quot;cn.jpush.example&quot; // &lt;--您应用的包名
      ……
 }

</code></pre>

<p>在AndroidManifest中使用 ${applicationId} 引用gradle中定义的包名</p>
<p><strong>AndroidManifest 示例</strong></p>
<pre><code>
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    package=&quot;您应用的包名&quot;
    android:versionCode=&quot;216&quot;
    android:versionName=&quot;2.1.6&quot;
    &gt;
    &lt;uses-sdk android:minSdkVersion=&quot;9&quot; android:targetSdkVersion=&quot;23&quot; /&gt;

        &lt;!-- Required --&gt;
        &lt;permission 
            android:name=&quot;您应用的包名.permission.JPUSH_MESSAGE&quot;  
            android:protectionLevel=&quot;signature&quot; /&gt;

    &lt;!-- Required --&gt;
    &lt;uses-permission android:name=&quot;您应用的包名.permission.JPUSH_MESSAGE&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.RECEIVE_USER_PRESENT&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.WAKE_LOCK&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.VIBRATE&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.MOUNT_UNMOUNT_FILESYSTEMS&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.WRITE_SETTINGS&quot; /&gt; 
    &lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt;

    &lt;!-- Optional. Required for location feature --&gt;
    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.CHANGE_WIFI_STATE&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.ACCESS_LOCATION_EXTRA_COMMANDS&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.CHANGE_NETWORK_STATE&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.GET_TASKS&quot; /&gt;

    &lt;application
        android:icon=&quot;@drawable/ic_launcher&quot;
        android:label=&quot;@string/app_name&quot;
        android:name=&quot;Your Application&quot;&gt;

        &lt;!-- Required SDK 核心功能--&gt;
        &lt;!-- option since 2.0.5 可配置PushService，DaemonService,PushReceiver,AlarmReceiver的android:process参数 将JPush相关组件设置为一个独立进程 --&gt;
        &lt;!-- 如：android:process=&quot;:remote&quot; --&gt;
        &lt;service
            android:name=&quot;cn.jpush.android.service.PushService&quot;
            android:enabled=&quot;true&quot;
            android:exported=&quot;false&quot; &gt;
            &lt;intent-filter&gt;
                &lt;action android:name=&quot;cn.jpush.android.intent.REGISTER&quot; /&gt;
                &lt;action android:name=&quot;cn.jpush.android.intent.REPORT&quot; /&gt;
                &lt;action android:name=&quot;cn.jpush.android.intent.PushService&quot; /&gt;
                &lt;action android:name=&quot;cn.jpush.android.intent.PUSH_TIME&quot; /&gt;
            &lt;/intent-filter&gt;
        &lt;/service&gt;

        &lt;!-- since 1.8.0 option 可选项。用于同一设备中不同应用的JPush服务相互拉起的功能。 --&gt;
        &lt;!-- 若不启用该功能可删除该组件，将不拉起其他应用也不能被其他应用拉起 --&gt;
         &lt;service
             android:name=&quot;cn.jpush.android.service.DaemonService&quot;
             android:enabled=&quot;true&quot;
             android:exported=&quot;true&quot;&gt;
             &lt;intent-filter &gt;
                 &lt;action android:name=&quot;cn.jpush.android.intent.DaemonService&quot; /&gt;
                 &lt;category android:name=&quot;您应用的包名&quot;/&gt;
             &lt;/intent-filter&gt;
         &lt;/service&gt;

        &lt;!-- Required --&gt;
        &lt;receiver
            android:name=&quot;cn.jpush.android.service.PushReceiver&quot;
            android:enabled=&quot;true&quot; &gt;
          &lt;intent-filter android:priority=&quot;1000&quot;&gt; 
                &lt;action android:name=&quot;cn.jpush.android.intent.NOTIFICATION_RECEIVED_PROXY&quot; /&gt; 
                &lt;category android:name=&quot;您应用的包名&quot;/&gt; 
            &lt;/intent-filter&gt;
            &lt;intent-filter&gt;
                &lt;action android:name=&quot;android.intent.action.USER_PRESENT&quot; /&gt;
                &lt;action android:name=&quot;android.net.conn.CONNECTIVITY_CHANGE&quot; /&gt;
            &lt;/intent-filter&gt;
            &lt;!-- Optional --&gt;
            &lt;intent-filter&gt;
                &lt;action android:name=&quot;android.intent.action.PACKAGE_ADDED&quot; /&gt;
                &lt;action android:name=&quot;android.intent.action.PACKAGE_REMOVED&quot; /&gt;
                &lt;data android:scheme=&quot;package&quot; /&gt;
            &lt;/intent-filter&gt;
        &lt;/receiver&gt;
     &lt;!-- Required SDK核心功能--&gt;
        &lt;activity
            android:name=&quot;cn.jpush.android.ui.PushActivity&quot;
            android:configChanges=&quot;orientation|keyboardHidden&quot;
            android:exported=&quot;false&quot; &gt;
            &lt;intent-filter&gt;
                &lt;action android:name=&quot;cn.jpush.android.ui.PushActivity&quot; /&gt;
                &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;
                &lt;category android:name=&quot;您应用的包名&quot; /&gt;
            &lt;/intent-filter&gt;
        &lt;/activity&gt;
        &lt;!-- Required SDK核心功能--&gt;
        &lt;service
            android:name=&quot;cn.jpush.android.service.DownloadService&quot;
            android:enabled=&quot;true&quot;
            android:exported=&quot;false&quot; &gt;
        &lt;/service&gt;
        &lt;!-- Required SDK核心功能--&gt;
        &lt;receiver android:name=&quot;cn.jpush.android.service.AlarmReceiver&quot; /&gt;

        &lt;!-- User defined. 用户自定义的广播接收器--&gt;
         &lt;receiver
             android:name=&quot;您自己定义的Receiver&quot;
             android:enabled=&quot;true&quot;&gt;
             &lt;intent-filter&gt;
                 &lt;!--Required 用户注册SDK的intent--&gt;
                 &lt;action android:name=&quot;cn.jpush.android.intent.REGISTRATION&quot; /&gt; 
                 &lt;!--Required 用户接收SDK消息的intent--&gt; 
                 &lt;action android:name=&quot;cn.jpush.android.intent.MESSAGE_RECEIVED&quot; /&gt; 
                 &lt;!--Required 用户接收SDK通知栏信息的intent--&gt;
                 &lt;action android:name=&quot;cn.jpush.android.intent.NOTIFICATION_RECEIVED&quot; /&gt; 
                 &lt;!--Required 用户打开自定义通知栏的intent--&gt;
                 &lt;action android:name=&quot;cn.jpush.android.intent.NOTIFICATION_OPENED&quot; /&gt; 
                 &lt;!--Optional 用户接受Rich Push Javascript 回调函数的intent--&gt;
                 &lt;action android:name=&quot;cn.jpush.android.intent.ACTION_RICHPUSH_CALLBACK&quot; /&gt; 
                 &lt;!-- 接收网络变化 连接/断开 since 1.6.3 --&gt;
                 &lt;action android:name=&quot;cn.jpush.android.intent.CONNECTION&quot; /&gt;
                 &lt;category android:name=&quot;您应用的包名&quot; /&gt;
             &lt;/intent-filter&gt;
         &lt;/receiver&gt;

        &lt;!-- Required. For publish channel feature --&gt;
        &lt;!-- JPUSH_CHANNEL 是为了方便开发者统计APK分发渠道。--&gt;
        &lt;!-- 例如: --&gt;
        &lt;!-- 发到 Google Play 的APK可以设置为 google-play; --&gt;
        &lt;!-- 发到其他市场的 APK 可以设置为 xxx-market。 --&gt;
        &lt;!-- 目前这个渠道统计功能的报表还未开放。--&gt;
        &lt;meta-data android:name=&quot;JPUSH_CHANNEL&quot; android:value=&quot;developer-default&quot;/&gt;
        &lt;!-- Required. AppKey copied from Portal --&gt;
        &lt;meta-data android:name=&quot;JPUSH_APPKEY&quot; android:value=&quot;Your AppKey&quot;/&gt; 
    &lt;/application&gt;
&lt;/manifest&gt;
</code></pre>

<h2 id="_6">配置和代码说明</h2>
<h3 id="_7">必须权限说明</h3>
<div class="table-d" align="center" >
  <table border="1" width = "100%">
    <tr  bgcolor="#D3D3D3" >
      <th >权限</th>
      <th >用途</th>
    </tr>
    <tr >
      <td>You Package.permission.JPUSH_MESSAGE</td>
      <td>官方定义的权限，允许应用接收JPUSH内部代码发送的广播消息。</td>
    </tr>
    <tr >
      <td>RECEIVE_USER_PRESENT</td>
      <td>允许应用可以接收点亮屏幕或解锁广播。</td>
    </tr>
    <tr >
      <td>INTERNET</td>
      <td>允许应用可以访问网络。</td>
    </tr>
    <tr >
      <td>WAKE_LOCK</td>
      <td>允许应用在手机屏幕关闭后后台进程仍然运行</td>
    </tr>
    <tr >
      <td>READ_PHONE_STATE</td>
      <td>允许应用访问手机状态。</td>
    </tr>
    <tr >
      <td>WRITE_EXTERNAL_STORAGE</td>
      <td>允许应用写入外部存储。</td>
    </tr>
    <tr >
      <td>READ_EXTERNAL_STORAGE</td>
      <td>允许应用读取外部存储。</td>
    </tr>
    <tr >
      <td>WRITE_SETTINGS</td>
      <td>允许应用读写系统设置项。</td>
    </tr>
    <tr >
      <td>VIBRATE</td>
      <td>允许应用震动。</td>
    </tr>
    <tr >
      <td>MOUNT_UNMOUNT_FILESYSTEMS</td>
      <td>允许应用挂载/卸载 外部文件系统。</td>
    </tr>
    <tr >
      <td>ACCESS_NETWORK_STATE</td>
      <td>允许应用获取网络信息状态，如当前的网络连接是否有效。</td>
    </tr>
  </table>
</div>

<h3 id="jpush-android-sdk">集成 JPush Android SDK 的混淆</h3>
<ul>
<li>
<p>请下载4.x及以上版本的<a href="http://sourceforge.net/projects/proguard/files/proguard/">proguard.jar</a>， 并替换你Android Sdk "tools\proguard\lib\proguard.jar"</p>
</li>
<li>
<p>请在工程的混淆文件中添加以下配置：</p>
<pre><code>-dontoptimize
-dontpreverify

-dontwarn cn.jpush.**
-keep class cn.jpush.** { *; }
</code></pre>
</li>
<li>
<p>v2.0.5 ~ v2.1.7 版本有引入 gson 和 protobuf ，增加排除混淆的配置。(2.1.8版本不需配置)</p>
<pre><code>#==================gson &amp;&amp; protobuf==========================
-dontwarn com.google.**
-keep class com.google.gson.** {*;}
-keep class com.google.protobuf.** {*;}
</code></pre>
</li>
</ul>
<h3 id="_8">添加代码</h3>
<p>JPush SDK 提供的 API 接口，都主要集中在 cn.jpush.android.api.JPushInterface 类里。</p>
<h4 id="api">基础API</h4>
<ul>
<li>
<p>init 初始化SDK</p>
<pre><code>public static void init(Context context)
</code></pre>
</li>
<li>
<p>setDebugMode 设置调试模式</p>
<pre><code>// You can enable debug mode in developing state. You should close debug mode when release.
public static void setDebugMode(boolean debugEnalbed)
</code></pre>
</li>
</ul>
<h4 id="_9">添加统计代码</h4>
<ul>
<li>参考文档： <a href="../android_api/#api_2">统计分析 API</a></li>
</ul>
<h4 id="example">调用示例代码（参考 example 项目）</h4>
<ul>
<li>
<p>init 只需要在应用程序启动时调用一次该 API 即可。</p>
</li>
<li>
<p>以下代码定制一个本应用程序 Application 类。需要在 AndoridManifest.xml 里配置。请参考上面 AndroidManifest.xml 片断，或者 example 项目。</p>
<pre><code>public class ExampleApplication extends Application {
@Override
    public void onCreate() {
        super.onCreate();
        JPushInterface.setDebugMode(true);
        JPushInterface.init(this);
    }
}
</code></pre>
</li>
</ul>
<h3 id="_10">测试确认</h3>
<ul>
<li>确认所需的权限都已经添加。如果必须的权限未添加，日志会提示错误。</li>
<li>确认 AppKey（在Portal上生成的）已经正确的写入 Androidmanifest.xml 。</li>
<li>确认在程序启动时候调用了init(context) 接口</li>
<li>确认测试手机（或者模拟器）已成功连入网络
    ＋ 客户端调用 init 后不久，如果一切正常，应有登录成功的日志信息</li>
<li>启动应用程序，在 Portal 上向应用程序发送自定义消息或者通知栏提示。详情请参考管理<a href="../../../console/Instructions">Portal</a>。<ul>
<li>在几秒内，客户端应可收到下发的通知或者正定义消息
如果 SDK 工作正常，则日志信息会如下图所示：</li>
</ul>
</li>
</ul>
<p><img alt="" src="../../image/jpush_android_log.jpg" /> </p>
<p>如图所示，客户端启动分为 4 步：</p>
<ul>
<li>检查 metadata 的 appKey 和 channel ，如果不存在，则启动失败</li>
<li>初始化 JPush SDK，检查 JNI 等库文件的有效性，如果库文件无效，则启动失败</li>
<li>检查 Androidmanifest.xml，如果有 Required 的权限不存在，则启动失败</li>
<li>连接服务器登录，如果存在网络问题，则登陆失败,或者前面三步有问题，不会启动JPush SDK</li>
</ul>
<h2 id="eclipseandroid-studio">从Eclipse工程导入到Android Studio</h2>
<p>JPush Demo 是极光推送随压缩包提供的用法示例Demo，原本适用于Eclipse工程。本教程将指导JPush用户用最简单的方法将极光推送Demo导入Android Studio。</p>
<h4 id="jpush">快速集成JPush</h4>
<p>参考<a href="../android_3m">3 分钟快速 Demo（Android）</a>，把JPush跑起来。之后你在Eclipse包浏览器中有可运行的项目。</p>
<p><img alt="" src="../../image/Image.png" /></p>
<h4 id="demoexport">右键点击demo工程，选择Export</h4>
<p><img alt="" src="../../image/Image_1.png" /></p>
<h4 id="gradle-build">选择导出目标位Gradle build文件，并确认</h4>
<p><img alt="" src="../../image/Image_2.png" />
<img alt="" src="../../image/Image_3.png" />
<img alt="" src="../../image/Image_4.png" />
<img alt="" src="../../image/Image_5.png" /></p>
<h4 id="_11">从文件浏览器中检查</h4>
<p>在Eclipse的workspace中，该Demo工程的文件夹中，生成了Gradle相关配置文件.</p>
<p><img alt="" src="../../image/Image_6.png" /></p>
<h4 id="android-studio-file-import-module">打开你的Android Studio工程，选择 File-&gt;Import Module</h4>
<p>在Android Studio中，一次只能打开一个Project，它相当于Eclipse中的一个workspace。而我们从Eclipse中导出的一个Project，则相当于Android Studio中的一个Module。</p>
<p><img alt="" src="../../image/Image_7.png" /></p>
<h4 id="eclipse-workspacedemo">选择Eclipse workspace下的Demo工程，并确认</h4>
<p><img alt="" src="../../image/Image_8.png" /></p>
<p><img alt="" src="../../image/Image_9.png" /></p>
<h4 id="modulegradle">查看导入的Module，并且gradle会自动生成编译选项</h4>
<p><img alt="" src="../../image/Image_10.png" /></p>
<p><img alt="" src="../../image/Image_11.png" /></p>
<p>现在就可以将极光推送Demo作为Android Studio的Module运行在真机或虚拟机上，并调试了</p>
<h2 id="_12">高级功能</h2>
<p>请参考：</p>
<p><a href="../android_api">API: Android</a></p>
<h2 id="_13">技术支持</h2>
<p>邮件联系：<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#115;&#117;&#112;&#112;&#111;&#114;&#116;&#64;&#106;&#112;&#117;&#115;&#104;&#46;&#99;&#110;">&#115;&#117;&#112;&#112;&#111;&#114;&#116;&#64;&#106;&#112;&#117;&#115;&#104;&#46;&#99;&#110;</a></p>
<p>问答社区：<a href="http://community.jiguang.cn/">极光社区</a></p> </div>
                        </div> <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../android_debug_guide/" class="btn btn-neutral float-right" title="Android SDK 调试指南">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../android_3m/" class="btn btn-neutral float-left" title="3 分钟 Demo"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright 2011-2016, jiguang.cn, All Rights Reserved. <br />粤ICP备12056275号-13 深圳市和讯华谷信息技术有限公司</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer> </div>
                </section>
            </div>
            <div class="col-lg-1">
                <div class="visible-lg">
                    <div id="tocright">
                        <div id="navbar-right">
                            <div>
                            <p>目录</p>
                            </div>
                            <ul class="nav" >
    
        
            <li><a href="#_1">使用提示</a></li>
        
            <li><a href="#_2">产品功能说明</a></li>
        
            <li><a href="#jcenter">jcenter 自动集成步骤</a></li>
        
            <li><a href="#_5">手动集成步骤</a></li>
        
            <li><a href="#_6">配置和代码说明</a></li>
        
            <li><a href="#eclipseandroid-studio">从Eclipse工程导入到Android Studio</a></li>
        
            <li><a href="#_12">高级功能</a></li>
        
            <li><a href="#_13">技术支持</a></li>
        
    
    </ul>
    


                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
</body>

</html>